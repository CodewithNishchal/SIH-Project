<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Citizen Reports - Scrollable Queue</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>

<body class="bg-gray-100 p-8">

    <div class="max-w-3xl mx-auto">

        <div class="bg-white rounded-lg shadow-sm">
            <div class="p-6 border-b border-gray-200">
                <h3 class="text-xl font-semibold text-gray-900">New Citizen Reports - Pending Verification</h3>
                <p class="mt-1 text-sm text-gray-600">Review and verify the following reports submitted by citizens.</p>
            </div>

            <div class="max-h-[34rem] overflow-y-auto">
                <ul id="report-list-container" class="divide-y divide-gray-200">

                    <%# EJS Loop Start: Iterate over the reportsData array from the backend %>
                        <% if (locals.reportsData && reportsData.length> 0) { %>
                            <% reportsData.forEach(report=> { %>

                                <li id="report-item-<%= report.id %>" class="p-6 hover:bg-gray-50 transition-colors">
                                    <div class="flex items-start space-x-4">
                                        <div class="flex-shrink-0">
                                            <span
                                                class="h-10 w-10 rounded-full flex items-center justify-center font-semibold <%= report.avatarClasses %>">
                                                <%= report.initials %>
                                            </span>
                                        </div>
                                        <div class="flex-grow">
                                            <div class="flex justify-between items-start">
                                                <div>
                                                    <p class="font-semibold text-gray-800">
                                                        <%= report.name %>
                                                    </p>
                                                    <div class="flex items-center text-sm text-gray-600 mt-1">
                                                        <svg class="w-4 h-4 mr-1.5 text-gray-400"
                                                            xmlns="http://www.w3.org/2000/svg" fill="none"
                                                            viewBox="0 0 24 24" stroke-width="1.5"
                                                            stroke="currentColor">
                                                            <path stroke-linecap="round" stroke-linejoin="round"
                                                                d="M15 10.5a3 3 0 11-6 0 3 3 0 016 0z" />
                                                            <path stroke-linecap="round" stroke-linejoin="round"
                                                                d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z" />
                                                        </svg>
                                                        <%= report.location %>
                                                    </div>
                                                </div>
                                                <p class="text-xs text-gray-500 flex-shrink-0">
                                                    <%= report.timestamp %>
                                                </p>
                                            </div>
                                            <div class="mt-3 flex flex-wrap gap-2">
                                                <%# Nested loop for tags %>
                                                    <% report.tags.forEach(tag=> { %>
                                                        <span
                                                            class="inline-flex items-center rounded-full px-3 py-1 text-xs font-medium <%= tag.classes %>">
                                                            <%= tag.text %>
                                                        </span>
                                                        <% }); %>
                                            </div>
                                            <div class="mt-4 flex justify-end">
                                                <a href="/api/reports/<%=report.name%>"
                                                    class="inline-flex items-center px-4 py-2 text-sm font-medium text-white border border-transparent rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 <%= report.buttonClasses %>">
                                                    View Report
                                                    <svg class="ml-2 -mr-1 h-5 w-5" xmlns="http://www.w3.org/2000/svg"
                                                        viewBox="0 0 20 20" fill="currentColor">
                                                        <path fill-rule="evenodd"
                                                            d="M3 10a.75.75 0 01.75-.75h10.638L10.23 5.29a.75.75 0 111.04-1.08l5.5 5.25a.75.75 0 010 1.08l-5.5 5.25a.75.75 0 11-1.04-1.08l4.158-3.96H3.75A.75.75 0 013 10z"
                                                            clip-rule="evenodd" />
                                                    </svg>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </li>

                                <% }); %>
                                    <% } else { %>
                                        <%# Optional: Display a message if there are no reports %>
                                            <li class="p-6 text-center text-gray-500">
                                                <p>No new reports to display at this time.</p>
                                            </li>
                                            <% } %>
                                                <%# EJS Loop End %>

                </ul>
            </div>
        </div>
    </div>

</body>

</html>